type Job @entity {
  id: ID!
  jobId: BigInt!
  client: Bytes! # address
  freelancer: Bytes! # address
  amount: BigInt!
  status: Int!
  resultUri: String
  nftId: BigInt
  paid: Boolean!
  platformFee: BigInt
  createdAt: BigInt!
  updatedAt: BigInt!
  milestones: [Milestone!]! @derivedFrom(field: "job")
}

type Milestone @entity {
  id: ID! # jobId + "-" + index
  job: Job!
  index: BigInt!
  amount: BigInt!
  description: String!
  isReleased: Boolean!
}

type User @entity {
  id: ID! # address
  jobsAsClient: [Job!]! @derivedFrom(field: "client")
  jobsAsFreelancer: [Job!]! @derivedFrom(field: "freelancer")
}
